/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.1
 FusionCharts JavaScript Library MSStackedCombiDY2D Chart
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.1
*/
(function(t){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=t:t(FusionCharts)})(function(t){t.register("module",["private","modules.renderer.js-msstepline",function(){var g=this.hcLib,c=this.window,B=!g.CREDIT_REGEX.test(c.location.hostname),l=g.chartAPI,I=g.pluckNumber,O=g.pluck,la=c.Image,c=g.preDefStr,P=g.schedular,F=c.line,G=g.toRaphaelColor,ma=g.getFirstValue,Ja=c.configStr,Ka=c.animationObjStr,x=c.dataLabelStr,na=g.BLANKSTRING,m=c.hiddenStr,S=Math.max,T=g.TOUCH_THRESHOLD_PIXELS,
oa=g.CLICK_THRESHOLD_PIXELS,La=g.hasTouch?T:oa,y=c.ROUND,d=c.miterStr;l("msstepline",{friendlyName:"Multi-series Step Line Chart",standaloneInit:!0,creditLabel:B,defaultDatasetType:"msstepline",defaultPlotShadow:1,applicableDSList:{msstepline:!0}},l.mscartesian,{drawverticaljoins:1,useforwardsteps:1,zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,enablemousetracking:!0},l.areabase);t.register("module",["private","modules.renderer.js-dataset-group-msstepline",function(){t.register("component",
["datasetGroup","msstepline",{},"line"])}]);t.register("component",["dataset","MSStepLine",{type:"msstepline",_addLegend:function(){var a=this.config,d=this.chart.components.legend,m=I(a.drawanchors,1),a={enabled:a.includeinlegend,type:F,drawLine:O(a.drawLine,!0),fillColor:G({color:a.anchorbgcolor,alpha:a.anchorbgalpha}),strokeColor:G({color:a.anchorbordercolor,alpha:"100"}),rawFillColor:a.anchorbgcolor,rawStrokeColor:a.anchorbordercolor,anchorSide:m?a.anchorsides:0,strokeWidth:a.anchorborderthickness,
label:ma(this.JSONData.seriesname),lineWidth:a.linethickness};this.legendItemId=d.addItems(this,this.legendInteractivity,a)},draw:function(){var a=this,c=a.JSONData,z=a.chart,l=z.getJobList(),t=z.components,u=a.config,ma=a.index||a.positionIndex,A=z.config,B,h,C=t.paper,R=t.xAxis[0],L=a.yAxis,n,e,M=z.graphics;B=M.datalabelsGroup;var E,p,N,J,v,I,ea=a.components.data,w,T=a.components.removeDataArr||[],oa=T.length,fa=u.linethickness,f=a.graphics.container,Oa=A.connectnulldata,H=M.datasetGroup,q,M=u.shadow,
D,K=a.graphics.dataLabelContainer,b={},Da,k,b=z.get(Ja,Ka),ga=b.dummyObj,ha=b.animObj,V=b.duration,qa=a.components.pool||[],ra=function(){!1!==a.visible||!1!==a._conatinerHidden&&void 0!==a._conatinerHidden||(f.lineGroup.hide(),f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),f.anchorGroup.hide(),K&&K.hide(),a._conatinerHidden=!0)},Pa=function(){H.lineConnector.attr({"clip-rect":null});H.lineConnector.node&&H.lineConnector.node.removeAttribute("clip-path");!1!==a.visible&&(f.lineShadowGroup.show(),
f.anchorShadowGroup.show(),f.anchorGroup.show(),K&&K.show())},W=!0,sa,ta=L.getAxisBase(),ta=L.yBasePos=L.getAxisPosition(ta),ia=t.canvas.config.clip,t=ia["clip-canvas-init"].slice(0),ia=ia["clip-canvas"].slice(0),ua=u.lineDashStyle,va={color:u.linecolor,alpha:u.alpha},wa,xa,aa,X,r=[],Ea=0,Y=[],ja=null,ya,ba=[],za=!1,Fa,ka=a.graphics.lineElement,Z=a.visible,Ga=u.drawverticaljoins,Qa=u.useforwardsteps,ca,Aa=b.animType,Ba=0,da,z=z.config.stepatmiddle?.5*R.getPVR():0,Ca,Ha=A.canvasTop,Ia=A.canvasBottom;
u.imagesLoaded=0;H.lineConnector=H.lineConnector||C.group("line-connector",H);f||(f=a.graphics.container={lineShadowGroup:C.group("connector-shadow",H.lineConnector),anchorShadowGroup:C.group("anchor-shadow",H.lineConnector),lineGroup:C.group(F,H.lineConnector),anchorGroup:C.group("anchors",H.lineConnector)},Z||(f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),f.lineGroup.hide(),f.anchorGroup.hide()));ea||(ea=a.components.data=[]);K||(K=a.graphics.dataLabelContainer=a.graphics.dataLabelContainer||
C.group(x,B),Z||K.hide());Z&&(f.lineShadowGroup.show(),f.anchorShadowGroup.show(),f.lineGroup.show(),f.anchorGroup.show(),K.show());B=R.getCategoryLen();for(h=0;h<B;h++)if(w=ea[h])k=w.config,J=k.setValue,N=k.setLink,v=k.setLevelTooltext,b=k.anchorProps,Da=b.symbol,D=b.shadow,I=k.displayValue,p=w.graphics.element,ca=w.graphics.image,n=w.graphics.hotElement,e=w.graphics.label,w||(w=ea[h]={graphics:{}}),null===J?(ba.length=0,Oa||(ja=null),p&&p.hide(),ca&&ca.hide(),e&&e.hide(),n&&n.hide()):(X={color:k.color,
alpha:k.alpha},sa=k.dashStyle,n=R.getAxisPosition(h),e=!a.visible&&V?ta:L.getAxisPosition(J),q=k.hoverEffects,b.isAnchorHoverRadius=q.anchorRadius,E=b.radius,Ca=b.borderThickness,da=e-E-Ca/2,E=e+E+Ca/2,da<Ha&&(A.toleranceTop=S(A.toleranceTop||0,Ha-da)),E>Ia&&(A.toleranceBottom=S(A.toleranceBottom||0,E-Ia)),da=R.getLabel(h),E=A.showtooltip?k.toolText+(v?na:k.toolTipValue):na,k.finalTooltext=E,v=k.eventArgs||(k.eventArgs={}),v.index=h,v.link=N,v.value=J,v.displayValue=I,v.categoryLabel=da,v.toolText=
E,v.id=u.userID,v.datasetIndex=ma,v.datasetName=c.seriesname,v.visible=Z,b.imageUrl?(k.anchorImageLoaded=!1,w._xPos=n,w._yPos=e,D=new la,D.onload=this._onAnchorImageLoad(a,h,v,n,e),D.onerror=this._onErrorSetter(a,h),D.src=b.imageUrl,Ba++):(ca&&ca.hide(),J=[Da[1]||2,n,e,b.radius,b.startAngle,b.dip],N={fill:G({color:b.bgColor,alpha:b.bgAlpha}),stroke:G({color:b.borderColor,alpha:b.borderAlpha}),"stroke-width":b.borderThickness,visibility:b.radius?Z:m},p||(qa.element&&qa.element.length?p=w.graphics.element=
qa.element.shift():(p=w.graphics.element=C.polypath(f.anchorGroup),p.attr({polypath:J}))),p.show().animateWith(ga,ha,{polypath:J},V,Aa,W&&ra),p.attr(N).shadow(D,f.anchorShadowGroup).data("hoverEnabled",q.enabled).data("eventArgs",v),W=!1),D=w.graphics.connector,q.enabled&&(J={polypath:[q.anchorSides||2,n,e,q.anchorRadius,q.startAngle,q.dip],fill:G({color:q.anchorColor,alpha:q.anchorBgAlpha}),stroke:G({color:q.anchorBorderColor,alpha:q.anchorBorderAlpha}),"stroke-width":q.anchorBorderThickness},N=
{polypath:[b.sides,n,e,b.radius,b.startAngle,0],fill:G({color:b.bgColor,alpha:b.bgAlpha}),stroke:G({color:b.borderColor,alpha:b.borderAlpha}),"stroke-width":b.borderThickness},p&&p.data("anchorRadius",b.radius).data("anchorHoverRadius",q.anchorRadius).data("hoverEnabled",q.enabled).data("setRolloverAttr",J).data("setRolloutAttr",N).data("eventArgs",v)),k.trackerConfig||(k.trackerConfig={}),k.trackerConfig.trackerRadius=S(b.radius,q&&q.anchorRadius||0,La)+(b.borderThickness||0)/2,aa=aa!==[G(X||va),
sa||ua].join(":"),null!==ja?(ba.length&&(r=r.concat(ba),ba.length=0),r.join(na)||r.push("M",ya,ja),Qa?(r.push("H",n-z),Ga?r.push("V",e):r.push("M",n-z,e),z&&r.push("H",n)):(Ga?r.push("V",e):r.push("M",ya,e),r.push("H",n)),aa&&(Ea?Y=Y.concat(r):(D||(D=w.graphics.connector=C.path(r,f.lineGroup),za=!0),D.animateWith(ga,ha,{path:r},V,Aa,W&&ra),D.attr({"stroke-dasharray":xa,"stroke-width":fa,stroke:wa,"stroke-linecap":y,"stroke-linejoin":2<fa?y:d}).shadow(Fa,f.lineShadowGroup),W=!1),r=[]),aa||D&&D.hide()):
ba.push("M",n,e),ya=n,ja=e,wa=G(X||va),Fa=X?{opacity:X&&X.alpha/100}:M,xa=sa||ua,Ea=void 0===O(k.color,k.alpha,k.dashed)?1:0,aa=[wa,xa].join(":"),w._xPos=n,w._yPos=e,!b.imageUrl&&this.drawLabel(h));u.noOfImages=u.totalImages=Ba;0===Ba&&l.labelDrawID.push(P.addJob(a.drawLabel.bind(a),g.priorityList.label));r.length&&(Y=Y.concat(r));c={path:Y};N={"stroke-dasharray":ua,"stroke-width":fa,stroke:G(va),"stroke-linecap":y,"stroke-linejoin":2<=fa?y:d};ka||(ka=a.graphics.lineElement=C.path({path:Y},f.lineGroup),
za=!0);ka.show().animateWith(ga,ha,c,V,Aa,W&&ra);ka.attr(N).shadow(M,f.lineShadowGroup);W=!1;V&&Z&&za&&(f.anchorGroup.hide(),f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),K.hide(),H.lineConnector.attr({"clip-rect":t}).animateWith(ga,ha,{"clip-rect":ia},V,"normal",Pa));for(h=0;h<oa;h++)a._removeDataVisuals(T.shift());a.drawn=!0}},F,{drawverticaljoins:void 0,useforwardsteps:void 0}])}]);t.register("module",["private","modules.renderer.js-msstackedcombidy2d",function(){var g=this,c=g.window,B=
g.hcLib,l=B.chartAPI,I=B.moduleCmdQueue,O=B.injectModuleDependency,la=B.pluck,P,F;F={friendlyName:"Multi-series Dual Y-Axis Stacked Combination Chart",creditLabel:!B.CREDIT_REGEX.test(c.location.hostname),defaultDatasetType:"column",applicableDSList:{line:!0,area:!0,column:!0,column3d:!0,msstepline:!0},_createDatasets:function(){var g=this.components,c=this.jsonData,l=c.dataset,F=l&&l.length,x,I,m,S=this.defaultDatasetType,T=this.applicableDSList,P=this.components.legend,O=g.xAxis[0],y,d,a,Q,z,U,
Ma=[],u={},pa=this.config,A,Na=this.config.catLen,h,C,R,L=0,n=pa.datasetMap||(pa.datasetMap={line:[],area:[],column:[],column3d:[],msstepline:[]}),e,M={line:[],area:[],column:[],column3d:[],msstepline:[]},E={},p;l||this.setChartMessage();this.config.categories=c.categories&&c.categories[0].category;I=g.dataset=[];for(c=0;c<F;c++)for(p=l[c],d=(d=la(p.renderas,S))&&d.toLowerCase(),"stepline"===d||"line"===d&&Number(p.drawinstepmode)?d="msstepline":"spline"===d&&(d="line"),T[d]||(d=S),a=t.get("component",
["dataset",d]),C=p.dataset&&p.dataset.length,void 0===u[d]?u[d]=0:u[d]++,m="datasetGroup_"+d,x=t.register("component",["datasetGroup",d]),(y=g[m])&&Ma.push(y),e=n[d],x&&!y?(y=g[m]=new x,y.chart=this,y.init()):y&&!E[d]&&y.init(),E[d]=!0,x=0,R=C||1;x<R;x++)m=e[0],C?(Q=p.dataset[x],Q.parentyaxis=p.parentyaxis):Q=p,a&&(m?(A=O.getCategoryLen(),h=Na-A,U=m.JSONData,z=U.data&&U.data.length,U=Q.data&&Q.data.length||0,z-=U,h=this._getDiff(z,U,h,A),A=h.diff,h=h.startIndex,0<A&&m.removeData(h,A,!1),m.JSONData=
Q,m.index=L,m.configure(),e.splice(0,1)):(m=new a,m.chart=this,m.index=L,m.init(Q)),y&&y.addDataSet(m,u[d],x),M[d].push(m),I.push(m),L++);this._setDatasetOrder();for(l in n)for(e=n[l],F=e.length,x=0;x<F;x++)P.removeItem(e[x].legendItemId),B.componentDispose.call(e[x]);pa.datasetMap=M;this.config.catLen=O.getCategoryLen()}};P={hasLineSet:0,isstacked:!0,isdual:!0,drawverticaljoins:1,useforwardsteps:1,zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,stepatmiddle:1,enablemousetracking:!0};
l.msdybasecartesian?l("msstackedcombidy2d",F,l.msdybasecartesian,P,l.areabase):(O("charts","msstackedcombidy2d",1),I.charts.unshift({cmd:"_call",obj:c,args:[function(){l.msdybasecartesian?l("msstackedcombidy2d",F,l.msdybasecartesian,P,l.areabase):g.raiseError(g.core,"12052314141","run","JavaScriptRenderer~MSStackedCombiDY2D._call()",Error("FusionCharts.HC.Charts.js is required in order to define vizualization"))},[],c]}))}])});
